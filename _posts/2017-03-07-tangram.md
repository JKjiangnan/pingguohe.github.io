---

layout: post
title: Tangram是我们对界面动态化的态度
author: gaosboy

--- 

![][image-1]

**Tangram，七巧板，几块简单的积木就能拼出大千世界。我们用Tangram来命名这套界面方案，也是希望他能像七巧板一样可以通过几块积木就搭出丰富多彩的界面。**

# 什么是Tangram

Tangram是手机天猫从日常工作中沉淀出的一套Native界面解决方案，是我们不断权衡性能，稳定性，开发效率，灵活性和动态性多方面表现的结果。Tangram的名字是2015年8月份第一次被提出， 从天猫App首页方案抽象而来，现在支撑天猫App中的天猫超市，天猫直播，我的天猫，购物车等多个业务。

Tangram不仅仅是一个Native（iOS & Android）的界面开发框架，而是涵盖了Native SDK，GUI操作台，后端逻辑容器，组件库机制的一整套解决方案。

## Tangram怎么来的

事实上我们在探索界面动态性的路上从未停止过，在最初的时候我们试图通过HTML方案解决动态性问题，把关注重点放在提升WebView的运行性能和功能接口扩展上。在使用的过程中发现HTML+WebView的方案受到WebView本身的限制在渲染效率和内存占用上都有很大的问题，同时一张能在手机上高效运行页面对前端工程师的功力要求要而非常高。

之后，我们的方向转向Native，重点关注提升Native的动态性。最初，我们设计了一套Dynative的方案。这套方案用JSON作为描述语言，映射Native的基础组件，如：文本，图片，按钮等，来描述页面。在追求最大程度动态性的过程中，我们陷入了撰写超级复杂的JSON模板的泥潭。同时又因为模板细粒度非常小，导致了解析效率非常低。

经过了这两次不太成功的尝试，我们开始思考我们需要什么，我们要放弃什么。2014年双11之后我们开始在天猫App的首页上尝试一套新的界面动态化方案。在这套方案里，我们把动态性的粒度细到组件维度，布局限制到二维布局，在这样强的限制下界面模板的解析效率和运行时的渲染效率都得到了非常大的提升。

这套方案在天猫App首页上率先落地，经过几个月的沉淀SDK趋于成熟，我们开始进行周边建设，并开始对这套解决方案进行抽象和沉淀。

# Tangram的哲学

## 权衡

Tangram本身就是一个权衡的结果，

## 隔离

## 撤出

[image-1]:	https://gw.alicdn.com/tps/TB16xwrOpXXXXc.XFXXXXXXXXXX-2880-1402.png_800x800.jpg "Tangram Logo"